\documentclass[11pt]{report}

\usepackage[dvipsnames]{xcolor}
\usepackage{listings}
\usepackage{xspace}
\usepackage{hyperref}
\usepackage{color}

\setlength{\topmargin}{0in}
\setlength{\headheight}{0in}
\setlength{\headsep}{0in}
\setlength{\textheight}{9.0in}
\setlength{\textwidth}{6.5in}
\setlength{\evensidemargin}{0in}
\setlength{\oddsidemargin}{0in}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SMARTS' Keywords
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Environment.yaml Keywords
\newcommand{\compiler}{{\tt Compilers}\xspace}
\newcommand{\modset}{{\tt Modsets}\xspace}
\newcommand{\libs}{{\tt Libs}\xspace}
\newcommand{\mpi}{{\tt MPI}\xspace}
\newcommand{\module}{{\tt Module}\xspace}
\newcommand{\version}{{\tt Version}\xspace}
\newcommand{\pathname}{{\tt Path}\xspace}
\newcommand{\executables}{{\tt Executables}\xspace}
\newcommand{\name}{{\tt Name}\xspace}
\newcommand{\valueenv}{{\tt Value}\xspace}
\newcommand{\pathenv}{{\tt PATH}\xspace}
\newcommand{\run}{{\tt run}\xspace}
\newcommand{\hpcoptions}{{\tt HPC\_Options}\xspace}

% Environment.class Keywords
\newcommand{\listModsets}{{\tt list\_modsets}\xspace}
\newcommand{\loadModset}{{\tt load\_modset}\xspace}

% Test Keywords
\newcommand{\testRun}{{\tt run}\xspace}
\newcommand{\testName}{{\tt test\_name}\xspace}
\newcommand{\testDescription}{{\tt test\_description}\xspace}
\newcommand{\npcus}{{\tt nCPUs}\xspace}
\newcommand{\dependencies}{{\tt dependencies}\xspace}
\newcommand{\launchjob}{{\tt HPC.launch\_job}\xspace}
\newcommand{\launchscript}{{\tt HPC.launch\_script}\xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Yaml Listing Definition
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\YAMLcolonstyle{\color{red}\mdseries}
\newcommand\YAMLkeystyle{\color{black}\bfseries}
\newcommand\YAMLvaluestyle{\color{blue}\mdseries}

\makeatletter

% here is a macro expanding to the name of the language
% (handy if you decide to change it further down the road)
\newcommand\language@yaml{yaml}

\expandafter\expandafter\expandafter\lstdefinelanguage
\expandafter{\language@yaml}
{
keywords={true,false,null,y,n},
keywordstyle=\color{darkgray}\bfseries,
basicstyle=\YAMLkeystyle,                   % assuming a key comes first
sensitive=false,
comment=[l]{\#},
morecomment=[s]{/*}{*/},
commentstyle=\color{purple}\ttfamily,
stringstyle=\YAMLvaluestyle\ttfamily,
moredelim=[l][\color{orange}]{\&},
moredelim=[l][\color{magenta}]{*},
moredelim=**[il][\YAMLcolonstyle{:}\YAMLvaluestyle]{:}, % switch to value style at :
morestring=[b]',
morestring=[b]",
literate =    {---}{{\ProcessThreeDashes}}3
              {>}{{\textcolor{red}\textgreater}}1
              {|}{{\textcolor{red}\textbar}}1
              {\ -\ }{{\mdseries\ -\ }}3,
}

% switch to key style at EOL
\lst@AddToHook{EveryLine}{\ifx\lst@language\language@yaml\YAMLkeystyle\fi}
\makeatother

\newcommand\ProcessThreeDashes{\llap{\color{cyan}\mdseries-{-}-}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstset{basicstyle=\footnotesize\ttfamily,
        breakatwhitespace=false,
        breaklines=true,
        numbers=left,
        numberstyle=\tiny,
        frame=single,
        float
}

\hypersetup{
    colorlinks=true,
    linkcolor=blue
}

\title{SMARTS - Simple MPAS Atmosphere Regression Testing System - User Guide}
\date{v.000, 21 January 2020}

\begin{document}


\begin{titlepage}
\maketitle
\end{titlepage}


\tableofcontents


\chapter{Introduction}
\label{chap:intro}

This document is a placeholder for a future user document for SMARTS.

\begin{lstlisting}[language=yaml,
                   caption={YAML Example Code Listing},
                   label=yaml_exmaple]
// example.yaml Description:
    Name: Cheyenne
    Max Cores: 4
    Modules: True
    LMOD_CMD: /path/to/lmod_cmd
    HPC: PBS

Modsets:
    Libs:
        - One
        - Two
        - Three
\end{lstlisting}

\begin{lstlisting}[language=Python,
                   caption={Example Python Listing},
                   label=python_example]
// example_test.py
import time

class example_test:
    test_name = "Example Test"
    test_description = "This test makes a file and checks to see if it was" \
                       "created or not"
    nCPUs = 1
    dependencies = [None]

    def run(self, env, result, src_dir, test_dir, hpc):
        pass
\end{lstlisting}

\input{chap_smarts_cl.tex}

\input{chap_tests.tex}

\input{chap_environment_file.tex}

\input{chap_environment_class.tex}

\appendix

\input{appendix_example_envs.tex}

\input{appendix_example_tests.tex}

\end{document}
